<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Week 11: Loan Calculator</title>   
        <link href="css/style.css" rel="stylesheet" />
    </head>
    <body>
        <header>
            <h1>Week 11: Loan Calculator</h1>
            <h2>Stephanie Ventura</h2>
        </header>
        <main>
            <h3>Loan Calculator</h3>
            <label>Amount Borrowed: <input type="text" id="principal"></label>
            <label>Annual Interest Rate: <input type="text" id="annualRate"></label>
            <label>Number of years: <input type="text" id="years"></label>
            <label>Payments per year: <input type="text" id="periodsPerYear"></label>
            <label><button type="button" onclick="doPayment()">Compute Payment</button></label>
            <p><span id="output1"></p>
            <label>Number of Payments Paid To Date: <input type="text" id="numberOfPaymentMadeToDate"></label>
            <label><button type="button" onclick="doBalance()">Compute Payoff Amount</button></label>
            <p><span id="output2"></span></p>
        </main>
        <footer>
            &copy; 2021 &bull; Stephanie Ventura &bull; BYU-Idaho &bull; CIT 160
        </footer>
        <script>
            function doPayment(){
                //input
                let principal = parseFloat(document.getElementById("principal").value);
                let annualRate = parseFloat(document.getElementById("annualRate").value);
                let years = parseFloat(document.getElementById("years").value);
                let periodsPerYear = parseFloat(document.getElementById("periodsPerYear").value);
                //processing
                let payment = computePayment(principal, annualRate, years, periodsPerYear)
                //output
                document.getElementById("output1").innerHTML = `$${payment}`;
            }
                function computePayment(a, r, n, p){
                    let x = (a * r / p) / (1 - Math.pow(1 + r / p, -n * p));
                    return x.toFixed(2);
                }
            function doBalance() {
                //input
                let principal = parseFloat(document.getElementById("principal").value);
                let annualRate = parseFloat(document.getElementById("annualRate").value);
                let years = parseFloat(document.getElementById("years").value);
                let periodsPerYear = parseFloat(document.getElementById("periodsPerYear").value);
                let paid = parseFloat(document.getElementById("numberOfPaymentMadeToDate").value);
                //processing
                let balance = computeBalance(principal, annualRate, years, periodsPerYear, paid)
                //output
                document.getElementById("output2").innerHTML = `$${balance}`;
            }
                function computeBalance(a, r, n, p, d) {
                    let b = a * (Math.pow(1 + r, d)) - p * ((Math.pow(1 + r, d)) - 1) / r;
                    return b.toFixed(2);
                }
        </script>
    </body>
</html>